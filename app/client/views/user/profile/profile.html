<template name="profile">
	{{#with currentUser}}
		<app-header-layout has-scrolling-region fullbleed class="profile">
			<app-header class="app-grey white-text" fixed effects="waterfall">
				<app-toolbar class="app-grey white-text">
					<paper-icon-button icon="menu" drawer-toggle></paper-icon-button>
					<div flex>Account</div>
				</app-toolbar>
			</app-header>
			<div class="layout vertical center">
				<paper-material style="margin-top: 8px; padding: 16px; background: #fff;">
					<table>
						<tr>
							<td>Username</td>
							<td>{{profileName}}</td>
							<td>
								<paper-icon-button icon="create"  class="username-edit" style="background: #fff;">
								</paper-icon-button>
							</td>
						</tr>
						<tr>
							<td>Email</td>
							<td class="layout vertical">
								{{#each emails}}
									<div>
										{{address}}
										{{#if verified}}
											<span>
												<iron-icon icon="check"></iron-icon>
												{{#simpleTooltip}}Verified{{/simpleTooltip}}
											</span>
										{{/if}}
									</div>
								{{/each}}
							</td>
							<td></td>
						</tr>
						<tr>
							<td colspan="2">
								<a href="/change-password">
									<paper-button>Change password</paper-button>
								</a>
							</td>
						</tr>
						<tr>
							<td>
								API Key
							</td>
							<td class="apiKey">
								{{#if apiKey}}
									{{#unless showApiKey}}
										<paper-button class="showApiKey">
											Show
										</paper-button>
									{{else}}
										{{apiKey}}
									{{/unless}}
								{{else}}
									<paper-button class="generateMyApiKey">
										Generate
									</paper-button>
								{{/if}}
							</td>
						</tr>
					</table>
					<div style="max-width: 250px">
						{{> atForm state="signIn"}}
					</div>
					{{> atNavButton }}
				</paper-material>
			</div>
		</app-header-layout>
	{{/with}}
</template>
