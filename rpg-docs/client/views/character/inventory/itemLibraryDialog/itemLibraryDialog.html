<template name="itemLibraryDialog">
	<div class="fit item-library-dialog layout vertical">
		<app-toolbar class="app-grey white-text">
			<paper-icon-button id="backButton"
							   icon="arrow-back">
			</paper-icon-button>
			<div main-title>Items</div>
			<paper-input label="Search" class="search-input">
				<iron-icon icon="search" prefix></iron-icon>
			</paper-input>
		</app-toolbar>
		<div class="flex scroll-y">
			<div class="items" style="padding:8px">
				{{#if searchTerm}}
					{{#if searchItems.count}}
						<table style="width: 100%">
							<tbody>
								{{#each item in searchItems}}
									{{>libraryItem item=item selected=(isSelected item)}}
								{{/each}}
							</tbody>
						</table>
					{{else}}{{#if searchReady}}
							No items match "{{searchTerm}}"
					{{/if}}{{/if}}
					{{#unless searchReady}}
						<div class="layout vertical center" style="width: 100%; padding: 16px;">
							<paper-spinner active></paper-spinner>
						</div>
					{{/unless}}
				{{else}}
					{{#each categories}}
						<div class="paper-font-body2 category-header clickable">
							<iron-icon icon="chevron-right" class="{{#if isOpen key}}open{{/if}}">
							</iron-icon>
							{{name}}
						</div>
						<iron-collapse opened={{isOpen key}}>
							<table style="width: 100%">
								<tbody>
									{{#each item in (itemsInCategory key)}}
										{{>libraryItem item=item selected=(isSelected item)}}
									{{/each}}
								</tbody>
							</table>
							{{#unless ready key}}
								<paper-spinner active></paper-spinner>
							{{/unless}}
						</iron-collapse>
					{{/each}}
				{{/if}}
			</div>
		</div>
		<div class="layout horizontal end-justified">
			<paper-button class="cancelButton">Cancel</paper-button>
			<paper-button class="okButton">OK</paper-button>
		</div>
	</div>
</template>

<template name="libraryItem">
	<tr class="item library-item {{#if selected}}selected{{/if}}">
		<td class="itemName">
			{{item.name}}
			<paper-ripple></paper-ripple>
		</td>
		<td>
			{{item.weight}} lb.
			<paper-ripple></paper-ripple>
 		</td>
		<td>
			{{valueString item.value}}
			<paper-ripple></paper-ripple>
		</td>
	</tr>
</template>
