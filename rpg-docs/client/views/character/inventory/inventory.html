<template name="inventory">
	<div fit>
		<div id="inventory" class="scroll-y" fit>
			<div class="column-container">
				<!--Net Worth-->
				<paper-shadow class="card">
					<div class="white top" layout horizontal center>
						<div class="subhead" flex>
							Net Worth
						</div>
						<div>
							{{valueString netWorth}}
						</div>
					</div>
				</paper-shadow>
				<!--Weight Carried-->
				<paper-shadow class="card"
							  hero-id="main" {{detailHero "weightCarried" _id}}>
					<div class="top green white-text weightCarried"
						 hero-id="toolbar" {{detailHero "weightCarried" _id}}
						 layout horizontal center>
						<div class="subhead" flex>
							Weight Carried
						</div>
						<div>
							{{round weightCarried}}lbs
						</div>
					</div>
					<div class="bottom green" style="padding: 0;">
						{{> carryCapacityBar}}
					</div>
					{{#if encumberedBuffs.count}}
					<div class="bottom list">
						{{#each encumberedBuffs}}
						<div class="item-slot">
							<div class="item buff"
								 hero-id="main" {{detailHero}}
								 layout horizontal center>
								<div flex>
									<core-icon icon="work"
											   style="margin-right: 16px">
									</core-icon>
									{{name}}
								</div>
							</div>
						</div>
						{{/each}}
					</div>
					{{/if}}
				</paper-shadow>
				<!--Equipment-->
				<paper-shadow class="card equipmentContainer">
					<div class="white top" layout horizontal center>
						<div class="subhead" flex>
							Equipment
						</div>
						<div class="caption" style="margin-right: 8px">
							{{valueString equipmentValue}}
						</div>
						<div class="caption">
							{{round equipmentWeight}}lbs
						</div>
					</div>
					<div flex class="bottom list">
						{{#if attuned.count}}
							<div class="subhead">Attuned</div>
						{{/if}}
						{{#each attuned}}
							{{>inventoryItem}}
						{{/each}}
						{{#if attuned.count}}
							<div class="subhead">Equipment</div>
						{{/if}}
						{{#each equipment}}
							{{>inventoryItem}}
						{{/each}}
					</div>
				</paper-shadow>
				<!--Carried Items-->
				<paper-shadow class="card carriedContainer">
					<div class="white top" layout horizontal center>
						<div class="subhead" flex>
							Carried
						</div>
						<div class="caption" style="margin-right: 8px">
							{{valueString carriedValue}}
						</div>
						<div class="caption">
							{{round carriedWeight}}lbs
						</div>
					</div>
					<div flex class="bottom list">
						{{#each carriedItems}}
							{{>inventoryItem}}
						{{/each}}
					</div>
				</paper-shadow>
				{{#each containers}}
					<paper-shadow class="card itemContainer" 
								  hero-id="main" {{detailHero}}>
						<div class="top {{colorClass}}"
							 hero-id="toolbar" {{detailHero}}
							 layout horizontal center>
							<div class="subhead" flex
								 hero-id="title" {{detailHero}}>
								{{name}}
							</div>
							<div class="caption" style="margin-right: 8px">
								{{valueString totalValue}}
							</div>
							<div class="caption" style="margin-right: 8px">
								{{round totalWeight}}lbs
							</div>
							<core-tooltip label="Container carried" position="left">
								<paper-checkbox class="carriedCheckbox"
												disabled={{#unless canEditCharacter charId}}true{{/unless}}
												checked={{isCarried}}>
								</paper-checkbox>
							</core-tooltip>
						</div>
						<div class="bottom list">
							{{#each items ../_id _id}}
								{{>inventoryItem}}
							{{/each}}
						</div>
					</paper-shadow>
				{{/each}}
			</div>
			<div class="fab-buffer"></div>
		</div>
		{{#if canEditCharacter _id}}
			{{#fabMenu}}
				<core-tooltip label="New container" position="left">
					<paper-fab icon="work"
							   class="addContainer"
							   mini>
					</paper-fab>
				</core-tooltip>
				<core-tooltip label="New item" position="left">
					<paper-fab icon="note-add"
							   class="addItem"
							   mini>
					</paper-fab>
				</core-tooltip>
			{{/fabMenu}}
		{{/if}}
	</div>
</template>

<template name="inventoryItem">
	<div class="item-slot">
		<div class="item {{hidden}} inventoryItem"
					hero-id="main" {{detailHero}}
					layout horizontal center
			 		draggable={{canEditCharacter charId}}>
			<div flex class="itemName">
				{{#if ne1 quantity}}{{quantity}}&nbsp;{{/if}}{{pluralName}}
			</div>
			{{#if settings.showIncrement}}{{#if canEditCharacter charId}}
			<div class="incrementButtons">
				<paper-icon-button class="addItemQuantity"
								   icon="add"
								   style="margin-right: -8px"></paper-icon-button>
				<paper-icon-button class="subItemQuantity"
								   disabled={{lt1 quantity}}
								   icon="remove"
								   style="margin-right: -8px"></paper-icon-button>
			</div>
			{{/if}}{{/if}}
		</div>
	</div>
</template>
