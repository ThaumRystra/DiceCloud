<template name="itemDialog">
	{{#with item}}
		{{#baseDialog title=itemHeading class=colorClass startEditing=../startEditing}}
			{{> itemDetails}}
		{{else}}
			{{> itemEdit}}
		{{/baseDialog}}
	{{/with}}
</template>

<template name="itemDetails">
	{{#if icon}}
		<div layout vertical center>
			<core-icon icon="rpg:{{icon}}"
			           style="width: 80px; height: 80px; margin-bottom: 16px;">
			</core-icon>
		</div>
	{{/if}}
	<div layout horizontal wrap center justified class="headline">
		{{#if weight}}<div class="sideMargin">{{round totalWeight}}lbs</div>{{/if}}
		{{#if value}}<div>{{valueString totalValue}}</div>{{/if}}
	</div>
	<div layout horizontal wrap class="caption">
		{{#if enabled}}<div class="vertMargin" style="margin-right: 16px">Equipped</div>{{/if}}
		{{#if requiresAttunement}}<div class="vertMargin">Requires Attunement</div>{{/if}}
	</div>
	{{#if description}}
		<hr style="margin: 16px 0 16px 0;">
		<div>{{#markdown}}{{evaluateString charId description}}{{/markdown}}</div>
	{{/if}}
	{{> effectsViewList charId=charId parentId=_id}}
	{{> attacksViewList charId=charId parentId=_id}}
</template>

<template name="itemEdit">
	<paper-input class="fullwidth" id="itemNameInput" label="Name" floatinglabel value={{name}}></paper-input>
	<div layout horizontal center>
		Icon: {{> iconDropdown icon=icon}}
	</div>
	
	<hr class="vertMargin">

	<div layout horizontal wrap>
		<paper-input-decorator label="Quantity"
							   floatinglabel
							   style="width: 80px">
			<input id="quantityInput"
				   type="number"
				   value={{quantity}}>
		</paper-input-decorator>
		{{# if ne1 quantity}}
		<paper-input flex id="itemPluralInput"
					 label="Plural Name"
					 floatinglabel
					 value={{plural}}></paper-input>
		{{/if}}
	</div>
	<div center horizontal layout>
		<div class="padded">Show increment buttons</div>
		<paper-checkbox id="incrementCheckbox"
						checked={{settings.showIncrement}}>
		</paper-checkbox>
	</div>

	<hr class="vertMargin">

	<div layout horizontal wrap justified>
		<div center horizontal layout>
			<div class="padded">Container</div>
			{{> containerDropdown}}
		</div>
		<div center horizontal layout>
			<div class="padded">Equipped</div>
			<paper-toggle-button id="equippedInput"
								 checked={{enabled}}
								 role="button"
								 aria-pressed="false"
								 tabindex="0"
								 touch-action="pan-y">
			</paper-toggle-button>
		</div>
		<div center horizontal layout>
			<div class="padded">Requires Attunement</div>
			<paper-checkbox id="attunementCheckbox"
							checked={{requiresAttunement}}>
			</paper-checkbox>
		</div>
	</div>

	<hr class="vertMargin">

	<div layout horizontal around-justified>
		<paper-input-decorator label="Weight Each (lbs)" floatinglabel>
			<input id="weightInput" type="number" value={{weight}}>
		</paper-input-decorator>
		<!--Value-->
		<paper-input-decorator label="Value Each (GP)" floatinglabel>
			<input id="valueInput" type="number" value={{value}}>
		</paper-input-decorator>
	</div>

	<hr class="vertMargin">

	<!--Description-->
	<paper-input-decorator label="Description" floatinglabel layout vertical>
		<paper-autogrow-textarea>
			<textarea id="itemDescriptionInput" placeholder aria-label="Description" value={{description}}></textarea>
		</paper-autogrow-textarea>
	</paper-input-decorator>
	<!--Effects-->
	{{> effectsEditList parentId=_id parentCollection="Items" charId=charId enabled=equipped name=name}}
	<!--Attacks-->
	{{> attackEditList  parentId=_id parentCollection="Items" charId=charId enabled=equipped name=name}}
</template>

<template name="containerDropdown">
	<paper-dropdown-menu id="containerDropDown" label="Container">
		<paper-dropdown layered class="dropdown">
			<core-menu class="menu"  selected={{parent.id}}>
				{{#each containers}}
					<paper-item name={{_id}} class="containerMenuItem">{{name}}</paper-item>
				{{/each}}
			</core-menu>
		</paper-dropdown>
	</paper-dropdown-menu>
</template>
